MAP
# select.map

NAME select
STATUS ON
# 4x3
SIZE 480 360
FONTSET "/mesonet/data/gis/static/fonts/fonts.list"
#EXTENT -2223813 -1746393 2207341 1701506
# 4 x 3  600km 450
EXTENT 175000 4400000 775000 4850000
UNITS METERS
#SHAPEPATH "./"
SYMBOLSET "base.sym"
IMAGETYPE PNG
#TRANSPARENT off
#INTERLACE off
#IMAGECOLOR 140 144 90
IMAGECOLOR 255 255 255

#
PROJECTION
    "init=epsg:26915"
END

#
WEB
#  HEADER q_header.html
  TEMPLATE select.html
#  FOOTER q_footer.html
  MINSCALE 90000
  MAXSCALE 40000000
  IMAGEPATH "/var/www/htdocs/tmp/"
  IMAGEURL "/tmp/"
  #LOG "/mesonet/www/html/tmp/sw.log"
END

SYMBOL
  NAME 'fill45'
  TYPE Ellipse
  FILLED TRUE
  POINTS
   1 1
  END
  STYLE 1 5 END
END

# North America!!!
LAYER
  NAME namerica
  STATUS OFF
  TYPE POLYGON
  DATA /mesonet/data/gis/static/shape/4326/world/world_borders.shp
  PROJECTION
   "init=epsg:4326"
  END
  CLASSITEM "FIPS_CNTRY"
  CLASS
    EXPRESSION /US/
    COLOR  105 105 105
  END
  CLASS
    COLOR 191 191 191
  END
END


#
LAYER
  NAME iacounties
  STATUS OFF
  TYPE POLYGON
  DATA "/mesonet/data/gis/static/shape/26915/iowa/iacounties.shp"
  PROJECTION
    "init=epsg:26915"
  END
  LABELCACHE ON
  LABELITEM 'CO_NAME'
  LABELMAXSCALE 400000
  CLASS
    OUTLINECOLOR 210 210 210
#    COLOR 140 144 90
    LABEL 
      SIZE TINY
      TYPE BITMAP
      POSITION LC
#      COLOR 90 90 90
      COLOR 0 0 0
      PARTIALS FALSE
      FORCE FALSE
    END
  END
END


#
LAYER
  NAME counties
  STATUS OFF
  TYPE POLYGON
  DATA "/mesonet/data/gis/static/shape/26915/us/counties.shp"
  PROJECTION
    "init=epsg:26915"
  END
  LABELCACHE ON
  LABELITEM 'CO_NAME'
  LABELMAXSCALE 400000
  CLASS
    OUTLINECOLOR 210 210 210
#    COLOR 140 144 90
    LABEL 
      SIZE TINY
      TYPE BITMAP
      POSITION LC
#      COLOR 90 90 90
      COLOR 0 0 0
      PARTIALS FALSE
      FORCE FALSE
    END
  END
END

LAYER
  NAME wmsback
  STATUS ON
  CONNECTIONTYPE WMS
  TYPE RASTER
  CONNECTION "http://cairo.gis.iastate.edu/cgi-bin/server.cgi?format=jpeg&wmtver=1.0.0&request=map&servicename=GetMap&layers=cir"
  PROJECTION
    "init=epsg:26915"
  END
END

LAYER
  TYPE POINT
  NAME pointonly
  STATUS OFF
  PROJECTION
   "proj=latlong"
  END
  LABELCACHE ON
  CLASS
   SYMBOL 1
   COLOR 255 0 0
   SIZE 5
  END
END

LAYER
  NAME credits
  TYPE ANNOTATION
  STATUS default
  TRANSFORM FALSE
  CLASS
    LABEL
      COLOR 255 255 255
      BACKGROUNDCOLOR 0 0 200
      SHADOWSIZE 1 1
      SHADOWCOLOR 0 0 0
      BACKGROUNDSHADOWCOLOR 0 0 0
      BACKGROUNDSHADOWSIZE 1 1
      TYPE TRUETYPE
      SIZE 14
      FONT 'kcci'
      POSITION CR
      FORCE TRUE
      PARTIALS TRUE
    END
  END
  CLASS
    LABEL
      COLOR 0 0 200
#      BACKGROUNDCOLOR 0 0 200
#      SHADOWSIZE 1 1
#      SHADOWCOLOR 0 0 0
#      BACKGROUNDSHADOWCOLOR 0 0 0
#      BACKGROUNDSHADOWSIZE 1 1
      TYPE BITMAP
      SIZE MEDIUM
      POSITION CR
      FORCE TRUE
      PARTIALS TRUE
      WRAP '|'
    END
  END
END

LAYER
  NAME datapoint
  STATUS ON
  TYPE POINT
  LABELCACHE ON
  PROJECTION
   "init=epsg:4326"
  END
  CLASS
    COLOR -1 -1 -1
    LABEL
      COLOR  255 255 0
      OUTLINECOLOR  0 0 0
      #SHADOWCOLOR 0 0 0
      #SHADOWSIZE 1 1
      SIZE 14
      MINSIZE 4
      MAXSIZE 18
      TYPE TRUETYPE
      FONT kcci
      ANTIALIAS TRUE
      BUFFER 2
      FORCE TRUE
      POSITION UC
      OFFSET 0 3
    END
  END
  CLASS
    COLOR -1 -1 -1
    LABEL
      COLOR 0 0 0
#      OUTLINECOLOR 0 0 0
#      SHADOWCOLOR 0 0 0
#      SHADOWSIZE 1 1
      SIZE 7
      MINSIZE 4
      MAXSIZE 18
      TYPE TRUETYPE
      FONT arial
      ANTIALIAS true
      BUFFER 0
      FORCE FALSE
      POSITION AUTO
    END
  END
  CLASS
    COLOR -1 -1 -1
    LABEL
      COLOR  0 0 0
      SIZE 14
      MINSIZE 4
      MAXSIZE 18
      TYPE TRUETYPE
      FONT arial
      #TYPE BITMAP
      #SIZE LARGE
      ANTIALIAS TRUE
      BUFFER 2
      FORCE TRUE
      POSITION UC
    END
  END
END

LAYER
  NAME cityname
  STATUS ON
  TYPE POINT
  LABELCACHE OFF
  PROJECTION
    "init=epsg:4326"
  END
  CLASS
    COLOR -1 -1 -1
    LABEL
      COLOR 0 0 0
      SIZE MEDIUM
      TYPE BITMAP
      POSITION LC
      FORCE TRUE
    END
  END
END


LAYER
  TYPE POINT
  NAME dot
  STATUS ON
  METADATA
    "wms_title"  "Dot Layer"
  END
  PROJECTION
    "init=epsg:26915"
  END
  CLASS 
   SYMBOL 1
   COLOR 255 255 255
   SIZE 10
    LABEL
      COLOR  255 255 255
      OUTLINECOLOR 0 0 0 
      SHADOWCOLOR 0 0 0
      SHADOWSIZE 1 2
      SIZE 8
      MINSIZE 4
      MAXSIZE 18
      TYPE TRUETYPE
      FONT arialblk
      ANTIALIAS false
      BUFFER 0
      FORCE true
      POSITION UR
    END
  END
END

LAYER
  TYPE POLYGON
  NAME rect
  STATUS ON
  METADATA
    "wms_title"  "Rect Layer"
     "wms_srs"   "EPSG:26915"
  END
  PROJECTION
    "init=epsg:26915"
  END
  CLASS
    COLOR -1 -1 -1
    OUTLINECOLOR 255 255 255   
    LABEL
      COLOR  255 255 255
      OUTLINECOLOR 0 0 0 
      SHADOWCOLOR 0 0 0
      SHADOWSIZE 1 2
      SIZE 8
      MINSIZE 4
      MAXSIZE 18
      TYPE TRUETYPE
      FONT arialblk
      ANTIALIAS false
      BUFFER 0
      FORCE true
      POSITION LL
    END
  END
END

LAYER
	NAME states
	STATUS OFF
	TYPE LINE
	DATA "/mesonet/data/gis/static/shape/26915/us/states.shp"
	PROJECTION
	  "init=epsg:26915"
	END
	CLASS
		COLOR 0 0 0
		SYMBOL 'circle'
		SIZE 2
	END
END



LAYER
  NAME interstates
  TYPE LINE
  STATUS OFF
  PROJECTION
   "init=epsg:4326"
  END
  DATA "/mesonet/data/gis/static/shape/4326/us/interstates.shp"
  CLASS
    COLOR 255 0 0
    SYMBOL 'circle'
    SIZE 4
    OVERLAYSYMBOL 'circle'
    OVERLAYSIZE 2
    OVERLAYCOLOR 0 0 0
  END
END


LAYER
  NAME interstates_label
  TYPE ANNOTATION
  STATUS OFF
  PROJECTION
   "init=epsg:4326"
  END
  LABELITEM HWYNAME
  DATA "/mesonet/data/gis/static/shape/4326/us/interstates.shp"
  CLASS
#    EXPRESSION ([HWYNAME] < 100)
    COLOR -1 -1 -1
    SYMBOL 'interstate_shield'
    LABEL
      TYPE TRUETYPE
      FONT arialblk
      POSITION CC
      MINDISTANCE 100
      MINFEATURESIZE 10
      SIZE 6
      COLOR 255 255 255
      PARTIALS FALSE
    END
  END
END

INCLUDE "inc_lsrs.map"



LAYER
  NAME sites
  STATUS OFF
  TYPE POINT
  CONNECTIONTYPE POSTGIS
  CONNECTION "user=nobody dbname=mesosite host=iemdb"
  DATA "geom from (select geom, id, plot_name, msoid, network, case when is_climate_site THEN 't' ELSE 'f' END as is_climate_site  from stations WHERE online = 't') as foo using unique msoid using srid=4326"
  PROJECTION
   "init=epsg:4326"
  END
  TOLERANCE 1000
  TOLERANCEUNITS pixels
  LABELITEM "plot_name"
  FILTER "network = 'IA_RWIS'"
  LABELCACHE ON
  CLASS
    TEMPLATE "http://kcci.mesonet.agron.iastate.edu/site.phtml?station=[ID]"
    COLOR 0 0 0
    SYMBOL 'circle'
    SIZE 6
    OVERLAYSYMBOL 'circle'
    OVERLAYSIZE 4
    OVERLAYCOLOR 250 0 0
    LABEL
      TYPE BITMAP
#      TYPE TRUETYPE
      SIZE SMALL
#      FONT Verabd
#      ANTIALIAS FALSE
#      SIZE 8
#      OUTLINECOLOR 250 250 250
      COLOR 0 0 255
      POSITION AUTO
      FORCE FALSE
      PARTIALS FALSE
      BUFFER 0
      ANTIALIAS FALSE
    END
  END
END

INCLUDE 'inc_roads.map'



END
