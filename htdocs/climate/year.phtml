<?php 
include("../../config/settings.inc.php");
include("$rootpath/include/forms.php"); 
$TITLE = "IEM | Climatology by Year";
$THISPAGE = "climatology-year";
include("$rootpath/include/header.php"); 
include("$rootpath/include/adodb-time.inc.php"); 

$year = isset($_GET["year"]) ? intval($_GET["year"]) : date("Y") - 1;
$prod = isset($_GET["prod"]) ? intval($_GET["prod"]) : 1;

$products = Array(
 1 => Array("name" => "Total Precipitation", 
            "tpl" => "archive/data/%Y/summary/total_precip.png"),
 2 => Array("name" => "Days with Precipitation", 
            "tpl" => "archive/data/%Y/summary/precip_days.png"),
 20 => Array("name" => "Average High Temperature", 
            "tpl" => "archive/data/%Y/summary/avg_high.png"),
 21 => Array("name" => "Average Low Temperature", 
            "tpl" => "archive/data/%Y/summary/avg_low.png"),
 22 => Array("name" => "Average Temperature", 
            "tpl" => "archive/data/%Y/summary/avg_temp.png"),

);

$ts = adodb_mktime(1,1,1,1,1,$year);
$imgurl = sprintf("%s/%s", "http://mesonet.agron.iastate.edu", strftime($products[$prod]["tpl"],$ts));

?>

<h3 class="heading">Yearly Summaries</h3>
<p>Please select from the following menu to view an analysis map of your 
choice.  Some of these maps are generated by a griding of once daily NWS COOP 
observations.  Data quality is always an issue, so please exercise caution
when using these plots.</p>

<div style="border: 1px solid #000; padding: 5px;">
<form name="selector" action="year.phtml">
<strong>Year:</strong> <?php echo yearSelect(1893, $year); ?> 
<strong>Product:</strong> <select name="prod">
<?php
reset($products);
while( list($key,$ar) = each($products)) {
  echo sprintf("<option value=\"%s\" %s>%s", $key, 
    ($prod == $key) ? "SELECTED": "", $ar["name"]);
}
?>
</select>
<input type="submit" value="Request Plot">
<br />
<img src="<?php echo $imgurl; ?>" alt="plot" />
</form>
</div>



<?php include("$rootpath/include/footer.php"); ?>
