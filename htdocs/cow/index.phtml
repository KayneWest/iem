<?php
 include("../../config/settings.inc.php");
 $wtype = isset($_GET["wtype"]) ? $_GET["wtype"] : Array();
 $ltype = isset($_GET["ltype"]) ? $_GET["ltype"] : Array();
 $syear = isset($_GET["syear"]) ? $_GET["syear"] : date("Y");
 $smonth = isset($_GET["smonth"]) ? $_GET["smonth"] : date("m");
 $sday = isset($_GET["sday"]) ? $_GET["sday"] : date("d");
 $shour = isset($_GET["shour"]) ? $_GET["shour"] : 12;
 $sts = mktime($shour, 0, 0, $smonth, $sday, $syear);
 $eyear = isset($_GET["eyear"]) ? $_GET["eyear"] : date("Y");
 $emonth = isset($_GET["emonth"]) ? $_GET["emonth"] : date("m");
 $eday = isset($_GET["eday"]) ? $_GET["eday"] : date("d");
 $ehour = isset($_GET["ehour"]) ? $_GET["ehour"] : 12;
 $ets = mktime($ehour, 0, 0, $emonth, $eday, $eyear);
 $hail = isset($_GET["hail"]) ? $_GET["hail"] : 0.75;
 $wfo = isset($_GET["wfo"]) ? $_GET["wfo"] : "MPX";

 $abegin = mktime(0,0,0,6,8,2005);
 if ($sts < $abegin){ $sts = $abegin; }
 if ($ets < $sts){ $n = $sts; $sts = $ets; $ets = $n; }

 $TITLE = "IEM Cow";
 include("$rootpath/include/header.php");
 include("$rootpath/include/forms.php");
 include("$rootpath/include/wfoLocs.php");
 include("$rootpath/include/database.inc.php");
?>
<a href="/cow/">Reset Application</a> (All timestamps are displayed in UTC)
<form method="GET" name="cow">
<table>
<tr>
 <th>Start:</th><td><?php echo yearSelect2(2005,$syear,"syear"); ?><?php echo monthSelect($smonth, "smonth"); ?><?php echo daySelect2($sday, "sday"); ?><?php echo gmtHourSelect($shour, "shour"); ?></td>
 <th>End:</th><td><?php echo yearSelect2(2005,$eyear,"eyear"); ?><?php echo monthSelect($emonth, "emonth"); ?><?php echo daySelect2($eday, "eday"); ?><?php echo gmtHourSelect($ehour, "ehour"); ?></td>
</tr>
</table>
<table>
<tr><th>WFO:</th>
<td>
<select name="wfo">
<?php
while( list($key, $value) = each($wfos) ){
  echo "<option value=\"$key\" ";
  if ($wfo == $key) echo "SELECTED";
  echo ">[".$key."] ". $wfos[$key]["city"] ."\n";
}
?>
</select>
</td>
<th>Warning Type:</th>
<td>
<input name="wtype[]" type="checkbox" value="TO" <?php if (in_array("TO", $wtype)) echo "CHECKED"; ?>>Tornado
<input name="wtype[]" type="checkbox" value="SV" <?php if (in_array("SV", $wtype)) echo "CHECKED"; ?>>Svr T'storm
</td></tr>
<tr>
<th>Hail Size:</th>
<td><select name="hail">
  <option value="0.75" <?php if ($hail == 0.75) echo "SELECTED"; ?>>0.75
  <option value="1.00" <?php if ($hail == 1.00) echo "SELECTED"; ?>>1.00
</select></td>
<th>LSR Type:</th>
<td>
<input name="ltype[]" type="checkbox" value="TO" <?php if (in_array("TO", $ltype)) echo "CHECKED"; ?>>Tornado
<input name="ltype[]" type="checkbox" value="SV" <?php if (in_array("SV", $ltype)) echo "CHECKED"; ?>>Svr T'storm
</td></tr>
</table>
<input type="submit" value="Go Cow Go"></form>

<?php if (isset($_GET["hail"])){ include("worker.php"); }
      else {
?>
<h3 class="heading">IEM Cow (NWS Warning Polygon Verification)</h3>

<p><img src="cow.jpg" align="right" style="margin: 5px;">Data presented here is <b>unofficial</b> and should be used for 
educational purposes only.  This application allows you to view warnings
and storm reports issued by a Weather Forecast Office (WFO) for a period
of time of your choice.  The application attempts to automatically provide
verification numbers for the warnings issued.

<p>This application works for dates after 8 June 2005.

<h3>Polygon Warnings?</h3>
<p><img src="polyexample.png" align="left" style="margin: 5px;">Most of you 
are certainly familiar with traditional warnings issued on a per county 
basis.  The National Weather Service has been experimenting with a new 
technology that generates warnings on a polygon basis.  A polygon is simply
a region much like a county.  Storms don't follow county borders nicely, so
many times warnings are issued for a county when only a small portion is
affected.

<p>The image shown here demonstrates the two types of warnings.  You can
see the traditional outline around the county which the warning is for.  The
white box is actually the polygon warning which often highlights the area
of concern for a particular storm.

<p>County based warnings will be around for a while.  The polygon warnings
highlight a latitude+longitude box which is hard for the public to understand.
At some point, the polygon is translated into counties.

<p>This application attempts to provide verification statistics for these
polygon warnings.  One of the motivations for polygons is to provide more
accurate warnings to the public.  This accuracy should be reflected in
higher verification numbers.  <b>The caveat is that not all WFOs are 
not actively considering the polygons when they generate warnings.</b>

<?php } include("$rootpath/include/footer.php"); ?>
