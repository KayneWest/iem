MAP
#
# Start of map file
#
NAME fancy
STATUS ON
SIZE 450 350
#SYMBOLSET symbols/symbol.sym
FONTSET "/mesonet/data/gis/static/fonts/fonts.list"
EXTENT -2223813 -1746393 2207341 1701506
UNITS METERS
SHAPEPATH "/mesonet/data/gis/static/"
SYMBOLSET "/mesonet/data/gis/static/symbols/stations.sym"
IMAGECOLOR -1 -1 -1
IMAGETYPE PNG
TRANSPARENT off
INTERLACE off

#
# Projection definition, consult the PROJ.4 documentation for parameter discussion
#
PROJECTION
  "proj=latlong"
#  "proj=lcc"
#   "lat_1=20"
#   "lat_2=60"
#   "lat_0=40"
#   "lon_0=-96"
#   "x_0=0"
#   "y_0=0"  
END

#
# Start of web interface definition
#
WEB
  HEADER q_header.html
  TEMPLATE fancy.html
  FOOTER q_footer.html
  MINSCALE 90000
  MAXSCALE 40000000
  IMAGEPATH "/var/www/htdocs/tmp/"
  IMAGEURL "/tmp/"
  LOG "/var/www/htdocs/tmp/fancy.log"
END



SCALEBAR
  IMAGECOLOR 255 255 255
  LABEL
    COLOR 0 0 0
    SIZE tiny
  END
  STYLE 1
  SIZE 50 2
  COLOR 0 0 0
  UNITS MILES
  INTERVALS 1
  TRANSPARENT TRUE
  STATUS TRUE
END

LAYER
  NAME background
  DATA images/back1.tif
  TYPE RASTER
  STATUS ON
  PROJECTION
   "proj=latlong"
  END
END

LAYER
  NAME states
  STATUS ON
  TYPE POLYGON
  DATA shape/iem/states.shp
  PROJECTION
   "proj=latlong"
  END
#  CLASSITEM "STATE_FIPS"
  CLASS
#    NAME "IOWA"
#    EXPRESSION "13"
    OUTLINECOLOR 0 255 0
    COLOR -1 -1 -1
  END
END

LAYER
  CONNECTIONTYPE postgis
  NAME sname
  CONNECTION "user=akrherz dbname=postgis host=mesonet.agron.iastate.edu"
  DATA "geom from current"
  STATUS ON
  TYPE POINT
  TEMPLATE q_template.html
  PROJECTION
   "proj=latlong"
  END
  FILTER "map_mode = 1"
  CLASS
    TEXT ([ sname ])
    COLOR -1 -1 -1
    LABEL
      COLOR  255 255 255
      OUTLINECOLOR 0 0 0 
      SHADOWCOLOR 0 0 0
      SHADOWSIZE 2 2
      SIZE 12
      MINSIZE 4
      MAXSIZE 18
      TYPE TRUETYPE
      FONT arial
      ANTIALIAS true
      BUFFER 0
      FORCE true
      POSITION LC
    END
  END
END

LAYER
  CONNECTIONTYPE postgis
  NAME temps
  CONNECTION "user=akrherz dbname=postgis host=mesonet.agron.iastate.edu"
  DATA "geom from current"
  STATUS ON
  TYPE POINT
  TEMPLATE q_template.html
  PROJECTION
   "proj=latlong"
  END
  FILTER "map_mode = 1"
  CLASS
    TEXT ([ tmpf ])
    COLOR -1 -1 -1
    LABEL
      COLOR  255 255 0
      OUTLINECOLOR  0 0 0
      SHADOWCOLOR 0 0 0
      SHADOWSIZE 2 2
      SIZE 16
      MINSIZE 12
      MAXSIZE 18
      TYPE TRUETYPE
      FONT arial
      ANTIALIAS false
      BUFFER 0
      FORCE true
      POSITION AUTO
    END
  END
END



LAYER
  CONNECTIONTYPE postgis
  NAME warnings0
  CONNECTION "user=akrherz dbname=postgis host=mesonet.agron.iastate.edu"
  DATA "geom_new from warnings"
  STATUS DEFAULT
  TYPE POLYGON
  TEMPLATE q_template.html
  FILTER "expire > CURRENT_TIMESTAMP"
  PROJECTION
   "proj=latlong"
  END
  CLASS
    COLOR -1 -1 -1
    BACKGROUNDCOLOR -1 -1 -1
    OUTLINECOLOR 255 0 0
#    SYMBOL 1
#    SIZE 10
  END
END

LAYER
  TYPE POINT
  NAME pointonly
  STATUS OFF
  CLASS 
   SYMBOL 1
   COLOR 255 0 0
   SIZE 15
   LABEL
    COLOR -1 -1 -1
   END
  END
END

END
