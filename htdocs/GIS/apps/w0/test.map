#
# Start of map file
#
NAME IAoverlay
STATUS ON
SIZE 450 350
#SYMBOLSET symbols/symbol.sym
FONTSET "/mesonet/www/html/GIS/data/fonts/fonts.list"
#EXTENT -97.50 39.25 -89.50 44.75
#UNITS DD
EXTENT 190000 4400000 740000 4900000
UNITS METERS

SHAPEPATH "/mesonet/www/html/GIS/data/"
SYMBOLSET "/mesonet/www/html/GIS/data/symbols/wind.sym"
IMAGECOLOR -1 -1 -1
IMAGETYPE PNG
TRANSPARENT off
INTERLACE off

#
# Projection definition, consult the PROJ.4 documentation for parameter discussion
#
PROJECTION
   "init=epsg:26915"
END

#
# Start of web interface definition
#
WEB
#  HEADER ia_header.html
  TEMPLATE ia.html
#  FOOTER ia_footer.html
  MINSCALE 90000
  MAXSCALE 4650000
  IMAGEPATH "/home/httpd/html/tmp/"
  IMAGEURL "/tmp/"
  LOG "/home/httpd/html/tmp/w0.log"
END


LAYER
  NAME counties
  STATUS DEFAULT
  TYPE POLYGON
  DATA shape/iacounties3.shp
  PROJECTION
    "proj=latlong"
  END
  CLASS
    COLOR -1 -1 -1
    OUTLINECOLOR 0 0 0 
  END
END

#LAYER
#  NAME wmsback
#  METADATA
#      "wms_srs" "EPSG:26975 EPSG:26915"
#      "wms_connectiontimeout" "60"
#  END
#  STATUS DEFAULT
#  CONNECTIONTYPE WMS
#  TYPE RASTER
#  CONNECTION
#   "http://belize.gis.iastate.edu/wmt/server.cgi?layers=drg100&format=jpeg&wmtver=1.0.0&request=map&servicename=iowa"
#  END
#END 



LAYER
  CONNECTIONTYPE postgis
  NAME sknt
  # Connect to a remote spatial database
  CONNECTION "user=nobody dbname=postgis"
  # Get the lines from the 'geom' column of the 'roads' table
  DATA "geom from (select geom, tmpf, 
    case WHEN sknt between 0 and 4.99 THEN chr(227)
       WHEN sknt between 5 and 9.99   THEN chr(228)
       WHEN sknt between 10 and 14.99 THEN chr(229)
       WHEN sknt between 15 and 19.99  THEN chr(230)
       WHEN sknt between 20  and 24.99 THEN chr(231)
       WHEN sknt between 25  and 29.99 THEN chr(232)
       WHEN sknt between 30  and 34.99 THEN chr(233)
       WHEN sknt between 35  and 39.99 THEN chr(234)
       WHEN sknt between 40  and 44.99 THEN chr(235)
       WHEN sknt between 45  and 49.99 THEN chr(236)
       ELSE chr(1) END as sknt, 
    (0 - drct) as drct, oid from current WHERE sknt > 0) as foo"
  STATUS DEFAULT
  TYPE POINT
  LABELANGLEITEM drct
  PROJECTION
   "proj=latlong"
  END
  CLASS
    TEXT ([sknt])
    COLOR -1 -1 -1
    LABEL
      SIZE 30
      POSITION CC
      COLOR 255 0 0
      BACKGROUNDCOLOR -1 -1 -1
      TYPE TRUETYPE
      FONT weather
      ANTIALIAS false
      BUFFER 0
#      FORCE true
    END
  END
END

END
