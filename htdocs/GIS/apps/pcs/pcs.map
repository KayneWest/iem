#
# Start of map file
#
NAME sites
STATUS ON
SIZE 450 350
#SYMBOLSET symbols/symbol.sym
FONTSET "/mesonet/data/gis/fonts/fonts.list"
EXTENT -98 40 -88 45
UNITS DD
SHAPEPATH "/mesonet/data/gis/"
SYMBOLSET "/mesonet/data/gis/symbols/stations.sym"
IMAGECOLOR -1 -1 -1
IMAGETYPE PNG
TRANSPARENT off
INTERLACE off

#
# Projection definition, consult the PROJ.4 documentation for parameter discussion
#
PROJECTION
  "proj=latlong"
END

#
# Start of web interface definition
#
WEB
  HEADER q_header.html
  TEMPLATE fancy.html
  FOOTER q_footer.html
  IMAGEPATH "/var/www/htdocs/tmp/"
  IMAGEURL "/tmp/"
  LOG "/var/www/htdocs/tmp/fancy.log"
END

LAYER
  NAME counties
  STATUS DEFAULT
  TYPE POLYGON
  DATA shape/iacounties3.shp
  PROJECTION
   "proj=latlong"
  END
  CLASS
    OUTLINECOLOR 0 0 255
    COLOR 200 200 200
  END
END

LAYER
  TYPE RASTER
  DATA /mesonet/www/html/archive/data/2002/05/11/GIS/n1p_1600.png
  NAME n1p
  STATUS DEFAULT
  PROJECTION
   "proj=latlong"
  END
  OFFSITE 0 0 0
  TRANSPARENCY 75
END

LAYER
  CONNECTIONTYPE postgis
  NAME datal
  CONNECTION "host=iemdb user=akrherz dbname=postgis"
  DATA "geom from (SELECT map.oid, 
      round(data.p01i::numeric,2)::float::text as p01i, data.station, 
      setsrid(map.geom, -1) as geom
      from stations map, hp_2002 data
      WHERE data.station = map.id and 
      data.valid = '2002-06-11 16:00:00+0000') as foo using srid=-1"
  STATUS ON
  TYPE POINT
  PROJECTION
   "proj=latlong"
  END
#  CLASSITEM "yrs"
  CLASS
#    EXPRESSION ([yrs] > 80)
    COLOR 0 0 0
    BACKGROUNDCOLOR 0 0 0
    SYMBOL 1
    SIZE 5
    TEXT ([ p01i ])
    LABEL
      COLOR 255 255 255
      OUTLINECOLOR 0 0 0
      BACKGROUNDCOLOR -1 -1 -1
      TYPE TRUETYPE
      SIZE 6
      FORCE true
      PARTIALS false
      MINSIZE 8
      MAXSIZE 18
      FONT arialblk
      ANTIALIAS true
      POSITION AUTO
      BUFFER 0
      WRAP 'W'
    END
  END
END


END
