#
# Start of map file
#
NAME sites
STATUS ON
SIZE 450 350
#SYMBOLSET symbols/symbol.sym
FONTSET "/mesonet/www/html/GIS/data/fonts/fonts.list"
EXTENT 1220178 885000 1797341 1226783
UNITS METERS
SHAPEPATH "/mesonet/www/html/GIS/data/"
SYMBOLSET "/mesonet/www/html/GIS/data/symbols/stations.sym"
IMAGECOLOR -1 -1 -1
IMAGETYPE PNG
TRANSPARENT off
INTERLACE off

#
# Projection definition, consult the PROJ.4 documentation for parameter discussion
#
PROJECTION
 "proj=lcc"
 "lat_1=42.0666"
 "lat_2=43.2666"
 "lat_0=41.5"
 "lon_0=-93.5"
 "x_0=1500000"
  "y_0=1000000"
END

#
# Start of web interface definition
#
WEB
  HEADER q_header.html
  TEMPLATE fancy.html
  FOOTER q_footer.html
  MINSCALE 90000
  MAXSCALE 40000000
  IMAGEPATH "/home/httpd/html/tmp/"
  IMAGEURL "/tmp/"
  LOG "/home/httpd/html/tmp/fancy.log"
END



SCALEBAR
  IMAGECOLOR 255 255 255
  LABEL
    COLOR 0 0 0
    SIZE tiny
  END
  STYLE 1
  SIZE 50 2
  COLOR 0 0 0
  UNITS MILES
  INTERVALS 1
  TRANSPARENT TRUE
  STATUS TRUE
END

LAYER
  NAME states
  STATUS ON
  TYPE POLYGON
  DATA shape/iem/states.shp
  PROJECTION
   "proj=latlong"
  END
#  CLASSITEM "STATE_FIPS"
  CLASS
#    NAME "IOWA"
#    EXPRESSION "13"
    OUTLINECOLOR 0 255 0
    COLOR 110 135 95
  END
END

LAYER
  NAME counties
  STATUS DEFAULT
  TYPE POLYGON
  DATA shape/iacounties3.shp
  PROJECTION
   "proj=latlong"
  END
  CLASS
    OUTLINECOLOR 0 0 255
    COLOR 200 200 200
  END
END

LAYER
  CONNECTIONTYPE postgis
  NAME coop
  CONNECTION "host=mesonet user=akrherz dbname=mesosite"
  DATA "geom from stations"
  FILTER "network = 'COOPDB'"
  STATUS ON
  TYPE POINT
  PROJECTION
   "proj=latlong"
  END
  CLASS
    COLOR 0 0 0
    BACKGROUNDCOLOR 0 0 0
    SYMBOL 1
    SIZE 10
    TEXT ([ name ])
    LABEL
      COLOR 0 0 0
      BACKGROUNDCOLOR -1 -1 -1
      TYPE TRUETYPE
      SIZE 4
      FORCE true
      PARTIALS false
      MINSIZE 6
      MAXSIZE 18
      FONT arial
      ANTIALIAS true
      POSITION AUTO
      BUFFER 0
    END
  END
END

LAYER
  CONNECTIONTYPE postgis
  NAME datal
  CONNECTION "host=10.10.10.20 user=akrherz dbname=coop"
  DATA "geom from (SELECT data.years as yrs, 
      map.OID, map.geom, round(data.high::numeric,0)::int as d 
      from stations map, climate data
      WHERE data.station = lower(map.id) and data.valid = '2000-02-10') as foo"
  STATUS ON
  TYPE POINT
  PROJECTION
   "proj=latlong"
  END
  CLASSITEM "yrs"
  CLASS
    EXPRESSION ([yrs] > 80)
    COLOR 0 0 0
    BACKGROUNDCOLOR 0 0 0
    SYMBOL 1
    SIZE 5
    TEXT ([ d ])
    LABEL
      COLOR 255 255 255
      OUTLINECOLOR 0 0 0
      BACKGROUNDCOLOR -1 -1 -1
      TYPE TRUETYPE
      SIZE 8
      FORCE true
      PARTIALS false
      MINSIZE 8
      MAXSIZE 18
      FONT arialblk
      ANTIALIAS true
      POSITION AUTO
      BUFFER 0
      WRAP 'W'
    END
  END
 CLASS
    EXPRESSION ([yrs] <= 80)
    COLOR 255 0 0
    BACKGROUNDCOLOR 255 0 0
    SYMBOL 1
    SIZE 5
    TEXT ([ d ])
    LABEL
      COLOR 255 255 255
      OUTLINECOLOR 0 0 0
      BACKGROUNDCOLOR -1 -1 -1
      TYPE TRUETYPE
      SIZE 8
      FORCE true
      PARTIALS false
      MINSIZE 8
      MAXSIZE 18
      FONT arialblk
      ANTIALIAS true
      POSITION AUTO
      BUFFER 0
      WRAP 'W'
    END
  END
END

LAYER
  NAME ttt
  STATUS ON
  TYPE POINT
  PROJECTION
    "proj=latlong"
  END
  CLASS
    COLOR -1 -1 -1
    BACKGROUNDCOLOR -1 -1 -1
    LABEL
      COLOR 255 255 255
      OUTLINECOLOR 0 0 0
      BACKGROUNDCOLOR -1 -1 -1
      TYPE TRUETYPE
      SIZE 14
      FORCE true
      PARTIALS false
      FONT arialblk
      ANTIALIAS true
      POSITION CR
      BUFFER 0
      WRAP 'W'
    END
  END
END

LAYER
  TYPE POINT
  NAME site
  STATUS ON
  CLASS
   SYMBOL 1
   COLOR 255 255 255
   SIZE 8
  END
  CLASS
   SYMBOL 9
   SIZE 8
  END
END

LAYER
  TYPE POINT
  NAME dot
  STATUS ON
  CLASS 
   SYMBOL 1
   COLOR 0 0 0
   SIZE 8
    LABEL
      COLOR  255 255 255
      OUTLINECOLOR 0 0 0 
      SHADOWCOLOR 0 0 0
      SHADOWSIZE 1 2
      SIZE 8
      MINSIZE 4
      MAXSIZE 18
      TYPE TRUETYPE
      FONT arialblk
      ANTIALIAS false
      BUFFER 1
      FORCE true
      POSITION AUTO
      PARTIALS false
    END
  END
END

END
